"use strict";(self.webpackChunkfloristby=self.webpackChunkfloristby||[]).push([[563],{1563:function(e,a,r){r.r(a),r.d(a,{default:function(){return E}});var s=r(3007),t=r(1072),n=r(5255),o=r(8312),l=r(743),c=r(7294),d=r(4268),i=r(5140),u=r(1283);const m=(0,d.hg)("login/loginByUsername",(async(e,a)=>{const{dispatch:r,extra:s,rejectWithValue:t}=a;try{const a=await s.api.post("/login",e);if(!a.data)throw new Error;return localStorage.setItem(u.z_,JSON.stringify(a.data)),r(i.hI.setAuthData(a.data)),s.navigate?.("/about"),a.data}catch(e){return t("error")}})),g=(0,d.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(m.pending,((e,a)=>{e.error=void 0,e.isLoading=!0})),e.addCase(m.fulfilled,((e,a)=>{e.isLoading=!1})),e.addCase(m.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:h}=g,{reducer:p}=g;var f=r(1715);const v=e=>e?.loginForm?.username??"",x=e=>e?.loginForm?.password??"",y=e=>e?.loginForm?.error,j=e=>e?.loginForm?.isLoading??!1;var N=r(1233),C=r(5401),b=r(5893);const w={loginForm:p},k=(0,c.memo)((e=>{let{className:a="",onSuccess:r}=e;const{t:d}=(0,t.$G)("loginForm"),i=(0,C.T)(),u=(0,l.v9)(v),g=(0,l.v9)(x),p=(0,l.v9)(y),k=(0,l.v9)(j),E=(0,c.useCallback)((e=>{i(h.setUsername(e))}),[i]),I=(0,c.useCallback)((e=>{i(h.setPassword(e))}),[i]),R=(0,c.useCallback)((async()=>{"fulfilled"===(await i(m({username:u,password:g}))).meta.requestStatus&&r()}),[r,i,u,g]);return(0,b.jsx)(N.W,{reducers:w,children:(0,b.jsxs)("div",{className:(0,s.A)("xYNEfcE9",{},[a]),children:[(0,b.jsx)(f.xv,{title:d("Форма авторизации"),className:"tNHSryI8"}),p&&(0,b.jsx)(f.xv,{text:d("Вы ввели неверный логин или пароль"),theme:f.lg.ERROR,className:"eMRip_RU"}),(0,b.jsx)(o.I,{value:u,onChange:E,placeholder:"Введите логин"}),(0,b.jsx)(o.I,{value:g,onChange:I,placeholder:"Введите пароль"}),(0,b.jsx)(n.zx,{onClick:R,className:"Ok_5amJo",disabled:k,children:d("Войти")})]})})}));k.displayName="LoginForm";var E=k},1233:function(e,a,r){r.d(a,{W:function(){return l}});var s=r(7294),t=r(743),n=r(5401),o=r(5893);const l=e=>{const{children:a,reducers:r,removeAfterUnmount:l=!0}=e,c=(0,t.oR)(),d=(0,n.T)();return(0,s.useEffect)((()=>{const e=c.reducerManager.getMountedReducers();return Object.entries(r).forEach((a=>{let[r,s]=a;e[r]||(c.reducerManager.add(r,s),d({type:`@INIT ${r} reducer`}))})),()=>{l&&Object.entries(r).forEach((e=>{let[a,r]=e;c.reducerManager.remove(a),d({type:`@DESTROY ${a} reducer`})}))}}),[d,r,l,c.reducerManager]),(0,o.jsx)(o.Fragment,{children:a})}},8312:function(e,a,r){r.d(a,{I:function(){return o}});var s=r(3007),t=r(7294),n=r(5893);const o=(0,t.memo)((e=>{const{className:a="",value:r="",type:t="text",placeholder:o="",onChange:l,readonly:c=!1,"data-testid":d="",...i}=e,u={fTN1PnWu:c};return(0,n.jsx)("div",{className:(0,s.A)("X8EVbQ1x",u,[a]),children:(0,n.jsx)("input",{type:t,value:r,readOnly:c,onChange:e=>{l?.(e.target.value)},placeholder:o,...i})})}));o.displayName="Input"}}]);